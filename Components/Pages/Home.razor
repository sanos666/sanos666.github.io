@page "/"

@using OMH_Player_Cards.Components.Entities
@using OMH_Player_Cards.Components.Services
@inject ICsvService _service;

<PageTitle>Home</PageTitle>

<OMH_Player_Cards.Client.Pages.PlayerSelector Players="@PlayerBios"/>


@code {
    // private HubConnection? hubConnection = new HubConnectionBuilder().WithUrl("https://localhost:7149/messageHub").Build();
    public List<PlayerStat> Players { get; set; } = new List<PlayerStat>();
    public List<PlayerBio> PlayerBios { get; set; } = new List<PlayerBio>();


    protected override void OnInitialized()
    {
        _service.Init();
        Players = _service.GetPlayers();
        PlayerBios = _service.GetPlayerBios();
    }

    // private async void SendPlayerNames()
    // {
    //     List<string> names = _service.GetNames();
    //     if (hubConnection is not null)
    //     {
    //         await hubConnection.InvokeAsync("SendPlayerNames", names);
    //     }
    // }    

    // private async void InitHub()
    // {
    //     hubConnection.On<string, string>("GetRequest", (type, name) =>
    //     {
    //         switch (type)
    //         {
    //             case "Player":
    //                 SetPlayer(name);
    //                 break;
    //             case "PlayerNames":
    //                 SendPlayerNames();
    //                 break;
    //         }
    //     });

    //     await hubConnection.StartAsync();
    // }
}
